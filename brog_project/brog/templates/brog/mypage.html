<!-- マイページ -->
{% extends 'brog/base.html' %} {% block content %}

<h1>{{ user.username }}さんのマイページ</h1>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>投稿一覧</h2>
  <a href="{% url 'brog:post_create' %}" class="btn btn-primary">新規投稿</a>
</div>

{% if posts %}
<ul>
  <div class="list-group">
    {% for post in posts %}

    <a
      href="{% url 'brog:post_detail' post.id %}"
      class="list-group-item list-group-item-action"
    >
      <div class="d-flex w-100 justify-content-between">
        <h5 class="mb-1">{{ post.title }}</h5>
        <small>{{ post.created_at|date:"Y年m月d日 H:i"}}</small>
      </div>
      <p class="mb-1">{{ post.content|truncatewords:20 }}</p>
    </a>
    {% endfor %}
  </div>
  <nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
      {% if page_obj.has_previous %}

      <a class="page-link" href="?page=1">&laquo; first</a>
      <a class="page-link" href="?page={{ page_obj.previous_page_number }}"
        >previous</a
      >
      {% else %}
      <li class="page-item disabled">
        <a class="page-link">&laquo; first</a>
      </li>
      <li class="page-item disabled">
        <a class="page-link">previous</a>
      </li>
      {% endif %}
      <li class="page-item">
        <a class="page-link" href="#"> {{ page_obj.number }}/{{ page_obj.paginator.num_pages }} </a>
      </li>

      {% if page_obj.has_next %}

      <a class="page-link" href="?page={{ page_obj.next_page_number }}">next</a>
      <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}"
        >last &raquo;</a
      >
      {% else %}
      <li class="page-item disabled">
        <a class="page-link">next</a>
      </li>
      <li class="page-item disabled">
        <a class="page-link">last &raquo;</a>
      </li>
      {% endif %}
    </ul>
  </nav>
</ul>
{% else %}
<p>まだ投稿がありません。</p>
{% endif %} {% endblock%}
